<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ì‚¬ì‹ì´ - 42 ê²½ì‚° ìŒì‹ ì›”ë“œì»µ</title>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<!-- ì‹œì‘ í™”ë©´ -->
		<div id="start-screen" class="screen active">
			<h1>ğŸ• ì‚¬ì‹ì´ ğŸœ</h1>
			<p>42 ê²½ì‚°ì—ì„œ ê°€ì¥ ë¨¹ê³  ì‹¶ì€ ë©”ë‰´ë¥¼ ê³¨ë¼ì£¼ì„¸ìš”!</p>
			<p class="participant-count">
				ì´ <span id="total-games">0</span>ë²ˆì˜ ê²Œì„ì´ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤
			</p>
			<button class="btn-primary" onclick="startGame()">ì‹œì‘í•˜ê¸°</button>
			<button class="btn-secondary" onclick="showStats()">í†µê³„ ë³´ê¸°</button>
		</div>

		<!-- ê²Œì„ í™”ë©´ -->
		<div id="game-screen" class="screen">
			<div class="game-header">
				<h2 id="round-title">16ê°•</h2>
				<div class="progress-bar">
					<div id="progress" class="progress-fill"></div>
				</div>
				<p id="match-info">1/8</p>
			</div>

			<div class="food-container">
				<div class="food-card" id="food-left" onclick="selectFood('left')">
					<img id="food-left-img" src="" alt="" />
					<h3 id="food-left-name"></h3>
				</div>

				<div class="vs">VS</div>

				<div class="food-card" id="food-right" onclick="selectFood('right')">
					<img id="food-right-img" src="" alt="" />
					<h3 id="food-right-name"></h3>
				</div>
			</div>
		</div>

		<!-- ê²°ê³¼ í™”ë©´ -->
		<div id="result-screen" class="screen">
			<h2>ğŸ† ìš°ìŠ¹ ë©”ë‰´ ğŸ†</h2>
			<div class="winner-card">
				<img id="winner-img" src="" alt="" />
				<h3 id="winner-name"></h3>
			</div>

			<div class="restaurant-section">
				<h3>ì´ ë©”ë‰´ë¥¼ ë¨¹ì„ ìˆ˜ ìˆëŠ” ì‹ë‹¹</h3>
				<div id="restaurant-list"></div>
			</div>

			<button class="btn-primary" onclick="showStats()">í†µê³„ ë³´ê¸°</button>
			<button class="btn-secondary" onclick="location.reload()">
				ë‹¤ì‹œ í•˜ê¸°
			</button>
		</div>

		<!-- í†µê³„ í™”ë©´ -->
		<div id="stats-screen" class="screen">
			<h2>ğŸ“Š í†µê³„</h2>
			<p class="total-games">
				ì´ ê²Œì„ ìˆ˜: <span id="stats-total-games">0</span>
			</p>

			<div class="stats-section">
				<h3>ğŸ† ìš°ìŠ¹ íšŸìˆ˜ TOP 5</h3>
				<div id="winner-stats"></div>
			</div>

			<div class="stats-section">
				<h3>â¤ï¸ ì„ íƒëœ íšŸìˆ˜ TOP 5</h3>
				<div id="selection-stats"></div>
			</div>

			<button class="btn-primary" onclick="showScreen('start-screen')">
				ëŒì•„ê°€ê¸°
			</button>
		</div>

		<!-- Firebase SDK -->
		<script type="module">
			// Import Firebase modules
			import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
			import {
				getFirestore,
				collection,
				doc,
				getDoc,
				getDocs,
				setDoc,
				updateDoc,
				increment,
			} from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

			// Firebase configuration
			const firebaseConfig = {
				apiKey: 'AIzaSyBHQAFiTUNFAk6XEDPo164isKbcqyrN_ls',
				authDomain: 'foodidealworldcup.firebaseapp.com',
				projectId: 'foodidealworldcup',
				storageBucket: 'foodidealworldcup.firebasestorage.app',
				messagingSenderId: '393852437251',
				appId: '1:393852437251:web:5f9145604d0d63062a5f36',
				measurementId: 'G-0SEHRJXXS1',
			};

			// Initialize Firebase
			const app = initializeApp(firebaseConfig);
			const db = getFirestore(app);

			// Export to window for use in script.js
			window.db = db;
			window.firestoreFunctions = {
				collection,
				doc,
				getDoc,
				getDocs,
				setDoc,
				updateDoc,
				increment,
			};
		</script>

		<script src="script.js"></script>
	</body>
</html>
